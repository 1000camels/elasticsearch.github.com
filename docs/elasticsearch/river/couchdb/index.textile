---
layout: doc_es
title: ElasticSearch Docs | River | CouchDB
---

<script type="text/javascript">
docBreadcrumb = [
    ["elasticsearch", "ElasticSearch"], 
    ["river", "River"],
    ["couchdb", "CouchDB"],
];
</script>

h1. CouchDB River

p. The CouchDB River allows to automatically index couchdb and make it searchable using the excellent "_changes":http://guide.couchdb.org/draft/notifications.html stream couchdb provides. Setting it up is as simple as executing the following against elasticsearch:

<pre class="prettyprint">
curl -XPUT 'localhost:9200/_river/my_db/_meta' -d '{
    "type" : "couchdb",
    "couchdb" : {
        "host" : "localhost",
        "port" : 5984,
        "db" : "my_db",
        "filter" : null
    },
    "index" : {
        "index" : "my_db",
        "type" : "my_db",
        "bulk_size" : "100",
        "bulk_timeout" : "10ms"
    }
}'
</pre>

p. This call will create a river that uses the @_changes@ stream to index all data within couchdb. Moreover, any "future" changes will automatically be indexed as well, making your search index and couchdb synchronized at all times.

p. Bulking is automatically done in order to speed up the indexing process. If within the specified @bulk_timeout@ more changes are detected, changes will be bulked up to @bulk_size@ before they are indexed.

p. On top of that, in case of a failover, the couchdb river will automatically be started on another elasticsearch node, and continue indexing from the last indexed seq.

p. The couchdb river is provided as a plugin and can be installed using @plugin -install river-couchdb@.
